===============================
Ścieżka do pliku: ./lib/features/test/test_page.dart

Zawartość pliku:

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:maia_flutter_client/features/test/backend/backend_provider.dart';

class TestPage extends ConsumerWidget{
  const TestPage({super.key});
  
  @override
  Widget build(BuildContext context, WidgetRef ref) {

    final brickName = ref.watch(testBackendProvider.select((testBackend) => testBackend.brickName));
    final bricksCount = ref.watch(testBackendProvider.select((testBackend) => testBackend.bricksCount));
    final brickStatus = ref.watch(testBackendProvider.select((testBackend) => testBackend.brickStatus));

    return Center(
      // Teraz możesz użyć zmiennej brickName bezpośrednio
      child: Column(
        children: [
          Text('Sentences page: $brickName'),
          Text('Bricks count: $bricksCount'),
          Icon(brickStatus ? Icons.check_circle : Icons.error);      Colors.green : Colors.red  i  ; ?? jak zrobic icon? zeby icon byl czerwony 
        ],
      ),
    );
  }
}


===============================
Ścieżka do pliku: ./lib/features/test/backend/backend_provider.dart

Zawartość pliku:

import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'test_backend.dart';

// 3. Zmień "Provider" na "ChangeNotifierProvider"
final testBackendProvider = ChangeNotifierProvider<TestBackend>((ref){
  return TestBackend();
});


===============================
Ścieżka do pliku: ./lib/features/test/backend/test_backend.dart

Zawartość pliku:

import 'dart:async';
import 'package:flutter/material.dart'; // Potrzebne do ChangeNotifier

// 1. Dodaj "with ChangeNotifier"
class TestBackend with ChangeNotifier {
  final String brickName = 'Brick M0001';
  bool brickStatus = false;
  int bricksCount = 0;
  Timer? _timer;
  Timer? _statusTimer;

  TestBackend(){
    _startTimer();
    _startStatusTimer();
  }

  void _startStatusTimer(){
    _timer = Timer.periodic(const Duration(milliseconds: 1000), (timer) {
      brickStatus = !brickStatus;

      notifyListeners();
    });
  }

  void _startTimer() {
    _timer = Timer.periodic(const Duration(milliseconds: 100), (timer) {
      bricksCount++;
      
      // 2. TO JEST KLUCZ! To mówi do UI: "Hej, zmieniłem się, przerysujcie się!"
      notifyListeners(); 
    });
  }
}


