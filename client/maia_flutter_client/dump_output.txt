===============================
Ścieżka do pliku: ./lib/app.dart

Zawartość pliku:

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'core/navigation_provider.dart';
import 'core/widgets/main_drawer.dart';
import 'features/home/home_page.dart';
import 'features/dictionary/dictionary_page.dart';
import 'features/words/words_page.dart';
import 'features/sentences/sentences_page.dart';
import 'features/test/test_page.dart';
import 'core/app_sizes.dart'; // Import stałych

class MainShell extends ConsumerWidget {
  const MainShell({super.key});

  static const List<Widget> _pages = [
    HomePage(),
    DictionaryPage(),
    WordsPage(),
    SentencesPage(),
    TestPage(),
  ];

  static const List<String> _titles = [
    'Ogłoszenia parafialne',
    'Dictionary',
    'Words',
    'Sentences',
    'Test'
  ];

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final selectedIndex = ref.watch(navigationIndexProvider);

    return Container(
      // Zamieniamy surfaceVariant na surfaceContainerHighest
      color: Theme.of(
        context,
      ).colorScheme.surfaceContainerHighest.withOpacity(0.5),
      child: Center(
        child: ConstrainedBox(
          constraints: const BoxConstraints(maxWidth: AppSizes.maxMobileWidth),
          child: Container(
            // Ten kontener dodaje cień i ogranicza Scaffold
            decoration: BoxDecoration(
              boxShadow: [
                BoxShadow(
                  color: Colors.black.withOpacity(0.05),
                  blurRadius: 10,
                ),
              ],
            ),
            child: ClipRect( //ClipRect jest potrzebny bo inaczej boczny Drawer rysuje sie poza oknem aplikacji w widoku np na tablecie, dlatego trzeba przyciac Drawer do glownego słupka aplikacji
              child: Scaffold(
                backgroundColor: Theme.of(context).colorScheme.surface,
                appBar: AppBar(
                  title: Text(_titles[selectedIndex]),
                  elevation: 2,
                ),
                drawer: const MainDrawer(),
                body: _pages[selectedIndex],
              ),
            ),
          ),
        ),
      ),
    );
  }
}



===============================
Ścieżka do pliku: ./lib/main.dart

Zawartość pliku:

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'app.dart';

void main() {
  // ProviderScope przechowuje stan wszystkich providerów
  runApp(const ProviderScope(child: MyApp()));
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'English Learning App',
      theme: ThemeData(
        //colorScheme: ColorScheme.fromSeed(seedColor: Colors.blue),
        useMaterial3: true,
      ),
      home: const MainShell(),
    );
  }
}



===============================
Ścieżka do pliku: ./lib/features/dictionary/dictionary_page.dart

Zawartość pliku:

import 'package:flutter/material.dart';

class DictionaryPage extends StatelessWidget{
  const DictionaryPage({super.key});
  
  @override
  Widget build(BuildContext context) {
    return const Center(
      child: Text("Slownik - niebawem"),
    );
  }
}


===============================
Ścieżka do pliku: ./lib/features/home/home_page.dart

Zawartość pliku:

import 'package:flutter/material.dart';

class HomePage extends StatelessWidget {
  const HomePage({super.key});

  @override
  Widget build(BuildContext context) {
    return const Center(child: Text('Strona Główna - Nauka Angielskiego'));
  }
}


===============================
Ścieżka do pliku: ./lib/features/test/test_page.dart

Zawartość pliku:

import 'package:flutter/material.dart';

class TestPage extends StatelessWidget{
  const TestPage({super.key});
  
  @override
  Widget build(BuildContext context) {
    return const Center(
      child: Text('Sentences page')
    );
  }
}


===============================
Ścieżka do pliku: ./lib/features/sentences/sentences_page.dart

Zawartość pliku:

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'presentation/sentences_provider.dart';

class SentencesPage extends ConsumerWidget {
  const SentencesPage({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // Obserwujemy stan naszego providera
    // To jak bindowanie property w QML: text: model.someText
    final state = ref.watch(sentencesProvider);
    // Dostep do metod (kontrolera) bez obserwowania zmian
    final notifier = ref.read(sentencesProvider.notifier);

    return Column(
      children: [
        // 1. Obsługa błędów
        if (state.errorMessage != null)
          Container(
            padding: const EdgeInsets.all(8),
            color: Colors.red.shade100,
            width: double.infinity,
            child: Text(
              'Błąd: ${state.errorMessage}',
              style: const TextStyle(color: Colors.red),
            ),
          ),

        // 2. Lista danych lub Loader
        Expanded(
          child: state.isLoading
              ? const Center(child: CircularProgressIndicator())
              : state.sentences.isEmpty
                  ? const Center(child: Text("Brak zdań do wyświetlenia."))
                  : ListView.builder(
                      itemCount: state.sentences.length,
                      padding: const EdgeInsets.all(8),
                      itemBuilder: (context, index) {
                        final item = state.sentences[index];
                        return Card(
                          margin: const EdgeInsets.symmetric(vertical: 4),
                          elevation: 2,
                          child: ListTile(
                            leading: CircleAvatar(
                              backgroundColor: Colors.deepPurple.shade100,
                              child: Text(item.id.toString()),
                            ),
                            title: Text(
                              item.sentence,
                              style: const TextStyle(fontWeight: FontWeight.bold),
                            ),
                            subtitle: Column(
                              crossAxisAlignment: CrossAxisAlignment.start,
                              children: [
                                const SizedBox(height: 4),
                                Text(
                                  item.translation,
                                  style: const TextStyle(
                                    fontStyle: FontStyle.italic,
                                    color: Colors.black87,
                                  ),
                                ),
                                const SizedBox(height: 4),
                                Row(
                                  children: [
                                    Icon(Icons.language, size: 14, color: Colors.grey[600]),
                                    const SizedBox(width: 4),
                                    Text(
                                      item.language,
                                      style: TextStyle(color: Colors.grey[600], fontSize: 12),
                                    ),
                                  ],
                                )
                              ],
                            ),
                            isThreeLine: true,
                          ),
                        );
                      },
                    ),
        ),

        // 3. Paginacja (Dolny pasek)
        Container(
          padding: const EdgeInsets.all(16),
          decoration: BoxDecoration(
            color: Theme.of(context).colorScheme.surfaceContainerHighest.withOpacity(0.3),
            border: Border(top: BorderSide(color: Colors.grey.withOpacity(0.2))),
          ),
          child: Row(
            mainAxisAlignment: MainAxisAlignment.spaceBetween,
            children: [
              ElevatedButton.icon(
                onPressed: state.currentPage > 1 && !state.isLoading
                    ? () => notifier.previousPage()
                    : null, // null wyłącza przycisk (enabled: false)
                icon: const Icon(Icons.arrow_back),
                label: const Text("Poprzednia"),
              ),
              
              Text(
                "Strona ${state.currentPage}",
                style: const TextStyle(fontWeight: FontWeight.bold),
              ),
              
              ElevatedButton.icon(
                onPressed: !state.isLastPage && !state.isLoading
                    ? () => notifier.nextPage()
                    : null,
                // Trick w Flutterze: zmiana kolejności dzieci w Row
                // Directionality.rtl zmieniłoby układ ikony, ale tutaj ręcznie układamy:
                label: const Text("Następna"),
                icon: const Icon(Icons.arrow_forward), 
              ),
            ],
          ),
        ),
      ],
    );
  }
}


===============================
Ścieżka do pliku: ./lib/features/sentences/presentation/sentences_provider.dart

Zawartość pliku:

import 'package:flutter_riverpod/flutter_riverpod.dart';
import '../data/sentence_model.dart';
import '../data/sentences_repository.dart';

class SentencesState {
  final List<Sentence> sentences;
  final bool isLoading;
  final String? errorMessage;
  final int currentPage;
  final int totalPages; // Nowe pole: całkowita liczba stron

  const SentencesState({
    this.sentences = const [],
    this.isLoading = false,
    this.errorMessage,
    this.currentPage = 1,
    this.totalPages = 1, // Domyślnie 1
  });

  // Getter (computed property) - czy jesteśmy na ostatniej stronie?
  bool get isLastPage => currentPage >= totalPages;

  SentencesState copyWith({
    List<Sentence>? sentences,
    bool? isLoading,
    String? errorMessage,
    int? currentPage,
    int? totalPages,
  }) {
    return SentencesState(
      sentences: sentences ?? this.sentences,
      isLoading: isLoading ?? this.isLoading,
      errorMessage: errorMessage, 
      currentPage: currentPage ?? this.currentPage,
      totalPages: totalPages ?? this.totalPages,
    );
  }
}

class SentencesNotifier extends StateNotifier<SentencesState> {
  final SentencesRepository _repository;
  static const int _perPage = 10; // Zmieniłem na 10 zgodnie z Twoim JSONem

  SentencesNotifier(this._repository) : super(const SentencesState()) {
    loadSentences(page: 1);
  }

  Future<void> loadSentences({required int page}) async {
    if (state.isLoading) return;

    // Resetujemy błąd i ustawiamy loading
    state = state.copyWith(isLoading: true, errorMessage: null);

    try {
      // Pobieramy naszą strukturę z repozytorium
      final response = await _repository.getSentences(page: page, perPage: _perPage);

      state = state.copyWith(
        isLoading: false,
        sentences: response.sentences, // Lista zdań
        totalPages: response.totalPages, // Całkowita liczba stron z API
        currentPage: page,
      );
    } catch (e) {
      state = state.copyWith(
        isLoading: false,
        errorMessage: e.toString(),
      );
    }
  }

  void nextPage() {
    // Używamy gettera isLastPage, który teraz bazuje na total_pages z API
    if (!state.isLastPage) {
      loadSentences(page: state.currentPage + 1);
    }
  }

  void previousPage() {
    if (state.currentPage > 1) {
      loadSentences(page: state.currentPage - 1);
    }
  }
}

final sentencesProvider = StateNotifierProvider<SentencesNotifier, SentencesState>((ref) {
  final repository = ref.watch(sentencesRepositoryProvider);
  return SentencesNotifier(repository);
});


===============================
Ścieżka do pliku: ./lib/features/sentences/data/sentence_model.dart

Zawartość pliku:

import 'package:equatable/equatable.dart';

// Equatable pozwala porównywać obiekty po wartościach pól, a nie referencji w pamięci.
// To jak przeładowanie operatora == w C++.
class Sentence extends Equatable {
  final int id;
  final String sentence;
  final String language;
  final String translation;
  // created_at przychodzi jako string, w prawdziwym projekcie parsujemy to na DateTime
  final String createdAt; 

  const Sentence({
    required this.id,
    required this.sentence,
    required this.language,
    required this.translation,
    required this.createdAt,
  });

  // Factory constructor - w C++ to byłaby statyczna metoda "createFromJson"
  factory Sentence.fromJson(Map<String, dynamic> json) {
    return Sentence(
      id: json['id'] as int,
      sentence: json['sentence'] as String,
      language: json['language'] as String,
      translation: json['translation'] as String,
      createdAt: json['created_at'] as String,
    );
  }

  @override
  List<Object?> get props => [id, sentence, language, translation, createdAt];
}


===============================
Ścieżka do pliku: ./lib/features/sentences/data/sentences_repository.dart

Zawartość pliku:

import 'package:dio/dio.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import '../../../core/network/dio_provider.dart';
import 'sentence_model.dart';

// Prosta klasa (jak struct w C++) do przekazania danych z API do Providera
class SentencesResponse {
  final List<Sentence> sentences;
  final int totalPages;

  SentencesResponse(this.sentences, this.totalPages);
}

final sentencesRepositoryProvider = Provider<SentencesRepository>((ref) {
  final dio = ref.watch(dioProvider);
  return SentencesRepository(dio);
});

class SentencesRepository {
  final Dio _dio;

  SentencesRepository(this._dio);

  // Zmieniamy typ zwracany na naszą strukturę SentencesResponse
  Future<SentencesResponse> getSentences({required int page, int perPage = 10}) async {
    try {
      final response = await _dio.get(
        '/api/sentences/',
        queryParameters: {
          'page': page,
          'per_page': perPage,
        },
      );

      // 1. Odbieramy główny obiekt JSON (Map<String, dynamic>)
      final Map<String, dynamic> json = response.data;

      // 2. Wyciągamy listę z klucza "data"
      final List<dynamic> rawList = json['data'];
      
      // 3. Wyciągamy liczbę stron z klucza "total_pages"
      final int totalPages = json['total_pages'] ?? 1; // domyślnie 1 jakby api nie dało

      // 4. Mapujemy listę
      final sentences = rawList.map((e) => Sentence.fromJson(e)).toList();

      // Zwracamy komplet danych
      return SentencesResponse(sentences, totalPages);

    } catch (e) {
      throw Exception('Failed to load sentences: $e');
    }
  }
}


===============================
Ścieżka do pliku: ./lib/features/words/words_page.dart

Zawartość pliku:

import 'package:flutter/material.dart';

class WordsPage extends StatelessWidget{
  const WordsPage({super.key});
  
  @override
  Widget build(BuildContext context) {
    return const Center(
      child: Text('Nauka slowek - niebawem'),
    );
  }
}


===============================
Ścieżka do pliku: ./lib/core/app_sizes.dart

Zawartość pliku:

class AppSizes{
  static const double maxMobileWidth = 550.0;
}


===============================
Ścieżka do pliku: ./lib/core/navigation_provider.dart

Zawartość pliku:

import 'package:flutter_riverpod/flutter_riverpod.dart';

final navigationIndexProvider = StateProvider<int>((ref) => 0);


===============================
Ścieżka do pliku: ./lib/core/widgets/main_drawer.dart

Zawartość pliku:

import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import '../navigation_provider.dart';

class MainDrawer extends ConsumerWidget {
  const MainDrawer({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // Odczytujemy stan, żeby wiedzieć, który element podświetlić
    final selectedIndex = ref.watch(navigationIndexProvider);

    return Drawer(
      child: ListView(
        padding: EdgeInsets.zero,
        children: [
          const DrawerHeader(
            decoration: BoxDecoration(color: Colors.deepPurple),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              mainAxisAlignment: MainAxisAlignment.end,
              children: [
                Text(
                  'English Learner',
                  style: TextStyle(color: Colors.white, fontSize: 24, fontWeight: FontWeight.bold),
                ),
                Text(
                  'Twój postęp: 45%',
                  style: TextStyle(color: Colors.white70, fontSize: 14),
                ),
              ],
            ),
          ),
          _DrawerTile(
            title: 'Ogłoszenia parafialne',
            icon: Icons.home,
            index: 0,
            isSelected: selectedIndex == 0,
          ),
          _DrawerTile(
            title: 'Slownik',
            icon: Icons.menu_book,
            index: 1,
            isSelected: selectedIndex == 1,
          ),
          _DrawerTile(
            title: 'Slowka',
            icon: Icons.school,
            index: 2,
            isSelected: selectedIndex == 2,
          ),
          _DrawerTile(
            title: 'Zwroty',
            icon: Icons.chat,
            index: 3,
            isSelected: selectedIndex == 3,
          ),
          _DrawerTile(
            title: 'Test',
            icon: Icons.quiz,
            index: 4,
            isSelected: selectedIndex == 4,
          ),
        ],
      ),
    );
  }
}

// Prywatny pomocniczy widget tylko dla tego pliku (Clean Code)
class _DrawerTile extends ConsumerWidget {
  final String title;
  final IconData icon;
  final int index;
  final bool isSelected;

  const _DrawerTile({
    required this.title,
    required this.icon,
    required this.index,
    required this.isSelected,
  });

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return ListTile(
      leading: Icon(icon, color: isSelected ? Colors.deepPurple : null),
      title: Text(title),
      selected: isSelected,
      onTap: () {
        // 1. Zmień stan indeksu
        ref.read(navigationIndexProvider.notifier).state = index;
        // 2. Zamknij drawer (ekran boczny)
        Navigator.pop(context);
      },
    );
  }
}


===============================
Ścieżka do pliku: ./lib/core/network/dio_provider.dart

Zawartość pliku:

import 'package:dio/dio.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

// Provider zwracający skonfigurowaną instancję Dio.
// Zmień baseUrl na adres swojego lokalnego serwera (dla emulatora Androida to zazwyczaj 10.0.2.2)
final dioProvider = Provider<Dio>((ref) {
  final dio = Dio(BaseOptions(
    baseUrl: 'https://maia-sentences.rafal-kruszyna.org', // Jeśli API stoi lokalnie na porcie 8000
    connectTimeout: const Duration(seconds: 5),
    receiveTimeout: const Duration(seconds: 5),
  ));
  return dio;
});


